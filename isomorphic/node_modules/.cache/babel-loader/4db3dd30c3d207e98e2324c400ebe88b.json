{"ast":null,"code":"/**\n * cuid.js\n * Collision-resistant UID generator for browsers and node.\n * Sequential for fast db lookups and recency sorting.\n * Safe for element IDs and server-side lookups.\n *\n * Extracted from CLCTR\n *\n * Copyright (c) Eric Elliott 2012\n * MIT License\n */\n\n/*global window, navigator, document, require, process, module */\n(function (app) {\n  'use strict';\n\n  var namespace = 'cuid',\n      c = 0,\n      blockSize = 4,\n      base = 36,\n      discreteValues = Math.pow(base, blockSize),\n      pad = function pad(num, size) {\n    var s = \"000000000\" + num;\n    return s.substr(s.length - size);\n  },\n      randomBlock = function randomBlock() {\n    return pad((Math.random() * discreteValues << 0).toString(base), blockSize);\n  },\n      safeCounter = function safeCounter() {\n    c = c < discreteValues ? c : 0;\n    c++; // this is not subliminal\n\n    return c - 1;\n  },\n      api = function cuid() {\n    // Starting with a lowercase letter makes\n    // it HTML element ID friendly.\n    var letter = 'c',\n        // hard-coded allows for sequential access\n    // timestamp\n    // warning: this exposes the exact date and time\n    // that the uid was created.\n    timestamp = new Date().getTime().toString(base),\n        // Prevent same-machine collisions.\n    counter,\n        // A few chars to generate distinct ids for different\n    // clients (so different computers are far less\n    // likely to generate the same id)\n    fingerprint = api.fingerprint(),\n        // Grab some more chars from Math.random()\n    random = randomBlock() + randomBlock();\n    counter = pad(safeCounter().toString(base), blockSize);\n    return letter + timestamp + counter + fingerprint + random;\n  };\n\n  api.slug = function slug() {\n    var date = new Date().getTime().toString(36),\n        counter,\n        print = api.fingerprint().slice(0, 1) + api.fingerprint().slice(-1),\n        random = randomBlock().slice(-2);\n    counter = safeCounter().toString(36).slice(-4);\n    return date.slice(-2) + counter + print + random;\n  };\n\n  api.globalCount = function globalCount() {\n    // We want to cache the results of this\n    var cache = function calc() {\n      var i,\n          count = 0;\n\n      for (i in window) {\n        count++;\n      }\n\n      return count;\n    }();\n\n    api.globalCount = function () {\n      return cache;\n    };\n\n    return cache;\n  };\n\n  api.fingerprint = function browserPrint() {\n    return pad((navigator.mimeTypes.length + navigator.userAgent.length).toString(36) + api.globalCount().toString(36), 4);\n  }; // don't change anything from here down.\n\n\n  if (app.register) {\n    app.register(namespace, api);\n  } else if (typeof module !== 'undefined') {\n    module.exports = api;\n  } else {\n    app[namespace] = api;\n  }\n})(this.applitude || this);","map":null,"metadata":{},"sourceType":"script"}