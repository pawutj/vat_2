{"ast":null,"code":"'use strict';\n\nvar reduce = require('lodash/reduce');\n\nvar find = require('lodash/find');\n\nvar startsWith = require('lodash/startsWith');\n/**\n * Transform sort format from user friendly notation to lodash format\n * @param {string[]} sortBy array of predicate of the form \"attribute:order\"\n * @return {array.<string[]>} array containing 2 elements : attributes, orders\n */\n\n\nmodule.exports = function formatSort(sortBy, defaults) {\n  return reduce(sortBy, function preparePredicate(out, sortInstruction) {\n    var sortInstructions = sortInstruction.split(':');\n\n    if (defaults && sortInstructions.length === 1) {\n      var similarDefault = find(defaults, function (predicate) {\n        return startsWith(predicate, sortInstruction[0]);\n      });\n\n      if (similarDefault) {\n        sortInstructions = similarDefault.split(':');\n      }\n    }\n\n    out[0].push(sortInstructions[0]);\n    out[1].push(sortInstructions[1]);\n    return out;\n  }, [[], []]);\n};","map":null,"metadata":{},"sourceType":"script"}