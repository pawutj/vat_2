{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\USER\\\\Desktop\\\\vat\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\USER\\\\Desktop\\\\vat\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\USER\\\\Desktop\\\\vat\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\USER\\\\Desktop\\\\vat\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\USER\\\\Desktop\\\\vat\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\USER\\\\Desktop\\\\vat\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\USER\\\\Desktop\\\\vat\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\USER\\\\Desktop\\\\vat\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\vat\\\\isomorphic\\\\src\\\\components\\\\firebase\\\\index.js\";\nimport React, { Component } from 'react';\nimport Button from '../uielements/button';\nimport Input from '../uielements/input';\nimport Modal from '../feedback/modal';\nimport { notification } from '../index';\nimport Firebase from '../../helpers/firebase/index';\n\nvar _default =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(_default, _Component);\n\n  function _default() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(_default)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      visible: false,\n      email: 'demo@gmail.com',\n      password: 'demodemo',\n      confirmLoading: false\n    };\n\n    _this.showModal = function () {\n      _this.setState({\n        visible: true\n      });\n    };\n\n    _this.handleCancel = function (e) {\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.handleLogin =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var _this$state, email, password, self, data, user, message, token;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$state = _this.state, email = _this$state.email, password = _this$state.password;\n\n              if (email && password) {\n                _context.next = 4;\n                break;\n              }\n\n              notification('error', 'Please fill in email. and password');\n              return _context.abrupt(\"return\");\n\n            case 4:\n              _this.setState({\n                confirmLoading: true\n              });\n\n              self = _assertThisInitialized(_assertThisInitialized(_this));\n\n              if (!_this.props.signup) {\n                _context.next = 12;\n                break;\n              }\n\n              _context.next = 9;\n              return Firebase.signup(Firebase.EMAIL, {\n                email: email,\n                password: password\n              });\n\n            case 9:\n              data = _context.sent;\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.next = 14;\n              return Firebase.login(Firebase.EMAIL, {\n                email: email,\n                password: password\n              });\n\n            case 14:\n              data = _context.sent;\n\n            case 15:\n              user = data && data.user ? data.user : false;\n              message = user === false && data && data.message ? data.message : 'Sorry Some error occurs';\n\n              if (!user) {\n                _context.next = 25;\n                break;\n              }\n\n              _context.next = 20;\n              return user.getIdToken();\n\n            case 20:\n              token = _context.sent;\n\n              _this.props.login(token);\n\n              _this.props.history.push('/dashboard');\n\n              _context.next = 27;\n              break;\n\n            case 25:\n              notification('error', message);\n              self.setState({\n                confirmLoading: false\n              });\n\n            case 27:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.resetPassword = function () {\n      var email = _this.state.email;\n\n      if (!email) {\n        notification('error', \"Please fill in email.\");\n        return;\n      }\n\n      Firebase.resetPassword(email).then(function () {\n        return notification('success', \"Password reset email sent to \".concat(email, \".\"));\n      }).catch(function (error) {\n        return notification('error', 'Email address not found.');\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        onClick: this.showModal,\n        className: \"btnFirebase\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, this.props.signup ? 'Sign up with Firebase' : 'Sign in with Firebase'), React.createElement(Modal, {\n        title: this.props.signup ? 'Sign up with Firebase' : 'Sign in with Firebase',\n        visible: this.state.visible,\n        confirmLoading: this.state.confirmLoading,\n        onCancel: this.handleCancel,\n        onOk: this.handleLogin,\n        className: \"isoFirebaseLoginModal\",\n        cancelText: \"Cancel\",\n        okText: \"Login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"isoInputWrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Email\"), React.createElement(Input, {\n        ref: function ref(email) {\n          return _this2.email = email;\n        },\n        size: \"large\",\n        placeholder: \"Email\",\n        value: this.state.email,\n        onChange: function onChange(event) {\n          _this2.setState({\n            email: event.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"isoInputWrapper\",\n        style: {\n          marginBottom: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Password\"), React.createElement(Input, {\n        type: \"password\",\n        size: \"large\",\n        placeholder: \"Password\",\n        value: this.state.password,\n        onChange: function onChange(event) {\n          _this2.setState({\n            password: event.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      })), React.createElement(\"span\", {\n        className: \"isoResetPass\",\n        onClick: this.resetPassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Reset Password\"))));\n    }\n  }]);\n\n  return _default;\n}(Component);\n\nexport { _default as default };","map":{"version":3,"sources":["C:\\Users\\USER\\Desktop\\vat\\isomorphic\\src\\components\\firebase\\index.js"],"names":["React","Component","Button","Input","Modal","notification","Firebase","state","visible","email","password","confirmLoading","showModal","setState","handleCancel","e","handleLogin","self","props","signup","EMAIL","data","login","user","message","getIdToken","token","history","push","resetPassword","then","catch","error","event","target","value","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Button from '../uielements/button';\nimport Input from '../uielements/input';\nimport Modal from '../feedback/modal';\nimport { notification } from '../index';\nimport Firebase from '../../helpers/firebase/index';\n\nexport default class extends Component {\n  state = {\n    visible: false,\n    email: 'demo@gmail.com',\n    password: 'demodemo',\n    confirmLoading: false,\n  };\n  showModal = () => {\n    this.setState({\n      visible: true,\n    });\n  };\n  handleCancel = e => {\n    this.setState({\n      visible: false,\n    });\n  };\n  handleLogin = async () => {\n    const { email, password } = this.state;\n    if (!(email && password)) {\n      notification('error', 'Please fill in email. and password');\n      return;\n    }\n    this.setState({\n      confirmLoading: true,\n    });\n    const self = this;\n    let data;\n    if (this.props.signup) {\n      data = await Firebase.signup(Firebase.EMAIL, {\n        email,\n        password,\n      });\n    } else {\n      data = await Firebase.login(Firebase.EMAIL, {\n        email,\n        password,\n      });\n    }\n    const user = data && data.user ? data.user : false;\n    const message =\n      user === false && data && data.message\n        ? data.message\n        : 'Sorry Some error occurs';\n    if (user) {\n      const token = await user.getIdToken();\n      this.props.login(token);\n      this.props.history.push('/dashboard');\n    } else {\n      notification('error', message);\n      self.setState({\n        confirmLoading: false,\n      });\n    }\n  };\n  resetPassword = () => {\n    const { email } = this.state;\n    if (!email) {\n      notification('error', `Please fill in email.`);\n      return;\n    }\n    Firebase.resetPassword(email)\n      .then(() =>\n        notification('success', `Password reset email sent to ${email}.`)\n      )\n      .catch(error => notification('error', 'Email address not found.'));\n  };\n  render() {\n    return (\n      <div>\n        <Button type=\"primary\" onClick={this.showModal} className=\"btnFirebase\">\n          {this.props.signup\n            ? 'Sign up with Firebase'\n            : 'Sign in with Firebase'}\n        </Button>\n        <Modal\n          title={\n            this.props.signup\n              ? 'Sign up with Firebase'\n              : 'Sign in with Firebase'\n          }\n          visible={this.state.visible}\n          confirmLoading={this.state.confirmLoading}\n          onCancel={this.handleCancel}\n          onOk={this.handleLogin}\n          className=\"isoFirebaseLoginModal\"\n          cancelText=\"Cancel\"\n          okText=\"Login\"\n        >\n          <form>\n            <div className=\"isoInputWrapper\">\n              <label>Email</label>\n              <Input\n                ref={email => (this.email = email)}\n                size=\"large\"\n                placeholder=\"Email\"\n                value={this.state.email}\n                onChange={event => {\n                  this.setState({ email: event.target.value });\n                }}\n              />\n            </div>\n            <div className=\"isoInputWrapper\" style={{ marginBottom: 10 }}>\n              <label>Password</label>\n              <Input\n                type=\"password\"\n                size=\"large\"\n                placeholder=\"Password\"\n                value={this.state.password}\n                onChange={event => {\n                  this.setState({ password: event.target.value });\n                }}\n              />\n            </div>\n            <span className=\"isoResetPass\" onClick={this.resetPassword}>\n              Reset Password\n            </span>\n          </form>\n        </Modal>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}