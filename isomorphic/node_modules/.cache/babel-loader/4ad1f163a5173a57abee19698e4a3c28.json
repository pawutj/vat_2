{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\USER\\\\Desktop\\\\vat\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\USER\\\\Desktop\\\\vat\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\vat\\\\isomorphic\\\\src\\\\containers\\\\ScrumBoard\\\\Board\\\\Board.js\";\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Icon } from 'antd';\nimport Column from '../Column/Column';\nimport { reorder, reorderTasks } from '../../../helpers/reorder';\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\nimport scrumBoardActions from '../../../redux/scrumBoard/actions';\nimport { ParentContainer, Container, AddListButton } from './Board.style';\nimport { filterSearchedComponents } from '../../../helpers/searchTaskCard';\nimport BoardLayout from './BoardLayout/BoardLayout';\nimport modalActions from '../../../redux/modal/actions';\n\nfunction Board(_ref) {\n  var currentBoard = _ref.currentBoard,\n      openModal = _ref.openModal,\n      boards = _ref.boards,\n      match = _ref.match,\n      columns = _ref.columns,\n      moveColumnWatcher = _ref.moveColumnWatcher,\n      tasks = _ref.tasks,\n      moveTaskWatcher = _ref.moveTaskWatcher,\n      ordered = _ref.ordered,\n      containerHeight = _ref.containerHeight,\n      _ref$withScrollableCo = _ref.withScrollableColumns,\n      withScrollableColumns = _ref$withScrollableCo === void 0 ? true : _ref$withScrollableCo,\n      boardRenderWatcher = _ref.boardRenderWatcher;\n  useEffect(function () {\n    boardRenderWatcher(match.params.id);\n  }, [match.params.id]);\n\n  var onDragEnd = function onDragEnd(_ref2) {\n    var source = _ref2.source,\n        destination = _ref2.destination,\n        type = _ref2.type,\n        draggableId = _ref2.draggableId;\n    // source= {\n    //   droppableId: 'column-1',\n    //   index: 0\n    // }\n    // destination= {\n    //   droppableId: 'column-1',\n    //   index: 1\n    // }\n    // type= \"TYPE\"\n    // draggableId: 'task-1'\n    // dropped nowhere\n    if (!destination) return; // did not move anywhere - can bail early\n\n    if (source.droppableId === destination.droppableId && source.index === destination.index) {\n      return;\n    } // reordering column\n\n\n    if (type === 'COLUMN') {\n      var columnOrdered = reorder(ordered, source.index, destination.index);\n      moveColumnWatcher({\n        board_id: match.params.id,\n        column_orders: columnOrdered\n      });\n      return;\n    }\n\n    var updatedColumns = reorderTasks({\n      columns: columns,\n      source: source,\n      destination: destination,\n      draggableId: draggableId\n    });\n    var draggedTask = tasks[draggableId];\n\n    var updatedTask = _objectSpread({}, draggedTask, {\n      column_id: destination.droppableId\n    });\n\n    var updatedTasks = _objectSpread({}, tasks, _defineProperty({}, updatedTask.id, updatedTask));\n\n    moveTaskWatcher({\n      columns: updatedColumns,\n      tasks: updatedTasks\n    });\n  };\n\n  var board = React.createElement(Droppable, {\n    droppableId: \"board\",\n    type: \"COLUMN\",\n    direction: \"horizontal\",\n    ignoreContainerClipping: Boolean(containerHeight),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, function (provided) {\n    return React.createElement(Container, Object.assign({\n      ref: provided.innerRef\n    }, provided.droppableProps, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), ordered && ordered.map(function (columnId, index) {\n      var column = columns[columnId];\n      var tasksWithinColumn = column.task_orders.map(function (task_id) {\n        return tasks[task_id];\n      });\n      return React.createElement(Column, {\n        key: columnId,\n        index: index,\n        title: column.title,\n        column: column,\n        boardId: match.params.id,\n        tasks: tasksWithinColumn,\n        isScrollable: withScrollableColumns,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      });\n    }), React.createElement(AddListButton, {\n      onClick: function onClick() {\n        return openModal({\n          modalType: 'CREATE_COLUMN',\n          modalProps: {\n            boardId: match.params.id\n          }\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), \" Add another list\"));\n  });\n  return React.createElement(BoardLayout, {\n    currentBoard: currentBoard,\n    boards: boards,\n    match: match,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, React.createElement(DragDropContext, {\n    onDragEnd: onDragEnd,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, containerHeight ? React.createElement(ParentContainer, {\n    height: containerHeight,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, board) : board));\n}\n\nexport default connect(function (state, ownProps) {\n  return {\n    ordered: state.scrumBoard.boards && state.scrumBoard.boards[ownProps.match.params.id] && state.scrumBoard.boards[ownProps.match.params.id].column_orders,\n    state: state.scrumBoard,\n    boards: state.scrumBoard.boards,\n    currentBoard: state.scrumBoard.boards[ownProps.match.params.id],\n    columns: filterSearchedComponents(state.scrumBoard.tasks, state.scrumBoard.columns, state.scrumBoard.searchText),\n    tasks: state.scrumBoard.tasks\n  };\n}, _objectSpread({}, scrumBoardActions, modalActions))(Board);","map":{"version":3,"sources":["C:\\Users\\USER\\Desktop\\vat\\isomorphic\\src\\containers\\ScrumBoard\\Board\\Board.js"],"names":["React","useEffect","connect","Icon","Column","reorder","reorderTasks","DragDropContext","Droppable","scrumBoardActions","ParentContainer","Container","AddListButton","filterSearchedComponents","BoardLayout","modalActions","Board","currentBoard","openModal","boards","match","columns","moveColumnWatcher","tasks","moveTaskWatcher","ordered","containerHeight","withScrollableColumns","boardRenderWatcher","params","id","onDragEnd","source","destination","type","draggableId","droppableId","index","columnOrdered","board_id","column_orders","updatedColumns","draggedTask","updatedTask","column_id","updatedTasks","board","Boolean","provided","innerRef","droppableProps","map","columnId","column","tasksWithinColumn","task_orders","task_id","title","modalType","modalProps","boardId","state","ownProps","scrumBoard","searchText"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Icon } from 'antd';\nimport Column from '../Column/Column';\nimport { reorder, reorderTasks } from '../../../helpers/reorder';\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\nimport scrumBoardActions from '../../../redux/scrumBoard/actions';\nimport { ParentContainer, Container, AddListButton } from './Board.style';\nimport { filterSearchedComponents } from '../../../helpers/searchTaskCard';\nimport BoardLayout from './BoardLayout/BoardLayout';\nimport modalActions from '../../../redux/modal/actions';\n\nfunction Board({\n  currentBoard,\n  openModal,\n  boards,\n  match,\n  columns,\n  moveColumnWatcher,\n  tasks,\n  moveTaskWatcher,\n  ordered,\n  containerHeight,\n  withScrollableColumns = true,\n  boardRenderWatcher,\n}) {\n  useEffect(\n    () => {\n      boardRenderWatcher(match.params.id);\n    },\n    [match.params.id]\n  );\n  const onDragEnd = ({ source, destination, type, draggableId }) => {\n    // source= {\n    //   droppableId: 'column-1',\n    //   index: 0\n    // }\n    // destination= {\n    //   droppableId: 'column-1',\n    //   index: 1\n    // }\n    // type= \"TYPE\"\n    // draggableId: 'task-1'\n\n    // dropped nowhere\n    if (!destination) return;\n    // did not move anywhere - can bail early\n    if (\n      source.droppableId === destination.droppableId &&\n      source.index === destination.index\n    ) {\n      return;\n    }\n\n    // reordering column\n    if (type === 'COLUMN') {\n      const columnOrdered = reorder(ordered, source.index, destination.index);\n      moveColumnWatcher({\n        board_id: match.params.id,\n        column_orders: columnOrdered,\n      });\n      return;\n    }\n\n    const updatedColumns = reorderTasks({\n      columns,\n      source,\n      destination,\n      draggableId,\n    });\n    const draggedTask = tasks[draggableId];\n    const updatedTask = {\n      ...draggedTask,\n      column_id: destination.droppableId,\n    };\n    const updatedTasks = {\n      ...tasks,\n      [updatedTask.id]: updatedTask,\n    };\n    moveTaskWatcher({ columns: updatedColumns, tasks: updatedTasks });\n  };\n\n  const board = (\n    <Droppable\n      droppableId=\"board\"\n      type=\"COLUMN\"\n      direction=\"horizontal\"\n      ignoreContainerClipping={Boolean(containerHeight)}\n    >\n      {provided => (\n        <Container ref={provided.innerRef} {...provided.droppableProps}>\n          {ordered &&\n            ordered.map((columnId, index) => {\n              const column = columns[columnId];\n              const tasksWithinColumn = column.task_orders.map(\n                task_id => tasks[task_id]\n              );\n\n              return (\n                <Column\n                  key={columnId}\n                  index={index}\n                  title={column.title}\n                  column={column}\n                  boardId={match.params.id}\n                  tasks={tasksWithinColumn}\n                  isScrollable={withScrollableColumns}\n                />\n              );\n            })}\n          <AddListButton\n            onClick={() =>\n              openModal({\n                modalType: 'CREATE_COLUMN',\n                modalProps: { boardId: match.params.id },\n              })\n            }\n          >\n            <Icon type=\"plus\" /> Add another list\n          </AddListButton>\n        </Container>\n      )}\n    </Droppable>\n  );\n\n  return (\n    <BoardLayout currentBoard={currentBoard} boards={boards} match={match}>\n      <DragDropContext onDragEnd={onDragEnd}>\n        {containerHeight ? (\n          <ParentContainer height={containerHeight}>{board}</ParentContainer>\n        ) : (\n          board\n        )}\n      </DragDropContext>\n    </BoardLayout>\n  );\n}\n\nexport default connect(\n  (state, ownProps) => {\n    return {\n      ordered:\n        state.scrumBoard.boards &&\n        state.scrumBoard.boards[ownProps.match.params.id] &&\n        state.scrumBoard.boards[ownProps.match.params.id].column_orders,\n      state: state.scrumBoard,\n      boards: state.scrumBoard.boards,\n      currentBoard: state.scrumBoard.boards[ownProps.match.params.id],\n      columns: filterSearchedComponents(\n        state.scrumBoard.tasks,\n        state.scrumBoard.columns,\n        state.scrumBoard.searchText\n      ),\n      tasks: state.scrumBoard.tasks,\n    };\n  },\n  { ...scrumBoardActions, ...modalActions }\n)(Board);\n"]},"metadata":{},"sourceType":"module"}